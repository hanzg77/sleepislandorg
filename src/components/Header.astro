---
interface Props {
  lang?: 'zh-Hans' | 'en';
}
const { lang = 'zh-Hans' } = Astro.props;
const isEn = lang === 'en';

const nav = isEn ? [
  { label: 'Resources', href: '/en/resources/' },
  { label: 'Guides', href: '/en/guides/' },
  { label: 'App', href: '/en/app/' },
] : [
  { label: '资源', href: '/resources/' },
  { label: '指南', href: '/guides/' },
  { label: 'App', href: '/app/' },
];

const langSwitch = isEn
  ? { label: '中文', href: '/' }
  : { label: 'EN', href: '/en/' };

const homeHref = isEn ? '/en/' : '/';
const ctaLabel = isEn ? 'Download' : '下载';
---

<header class="sticky top-0 z-50 bg-[var(--color-bg-primary)]/95 backdrop-blur border-b border-[var(--color-border-card)]">
  <div class="max-w-5xl mx-auto px-4 h-16 flex items-center justify-between">
    <!-- Logo -->
    <a href={homeHref} class="flex items-center gap-2 font-bold text-lg">
      <img src="/assets/logo-60.png" alt="Hushbay" width="32" height="32" class="rounded-lg" />
      <span class="hidden sm:inline">睡眠岛</span>
    </a>

    <!-- Nav -->
    <nav class="hidden md:flex items-center gap-6 text-sm text-[var(--color-text-secondary)]">
      {nav.map(item => (
        <a href={item.href} class="hover:text-white transition-colors">{item.label}</a>
      ))}
    </nav>

    <!-- Right side -->
    <div class="flex items-center gap-3">
      <a href={langSwitch.href} class="text-sm text-[var(--color-text-secondary)] hover:text-white transition-colors">
        {langSwitch.label}
      </a>
      <a
        href="https://apps.apple.com/app/id6747609991"
        class="bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white text-sm font-medium px-4 py-2 rounded-full transition-colors"
      >
        {ctaLabel}
      </a>
    </div>
  </div>

  <!-- Mobile nav -->
  <nav class="md:hidden border-t border-[var(--color-border-card)] px-4 py-2 flex gap-4 overflow-x-auto text-sm text-[var(--color-text-secondary)]">
    {nav.map(item => (
      <a href={item.href} class="whitespace-nowrap hover:text-white transition-colors">{item.label}</a>
    ))}
  </nav>
</header>
