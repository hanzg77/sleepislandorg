---
import BaseLayout from '../../layouts/BaseLayout.astro';
import CTABanner from '../../components/CTABanner.astro';
import ResourceCard from '../../components/ResourceCard.astro';

const schema = [
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Hushbay",
    "url": "https://sleepisland.org/en/",
    "inLanguage": ["en", "zh-Hans"]
  },
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Hushbay",
    "url": "https://sleepisland.org/",
    "logo": "https://sleepisland.org/assets/logo-1024.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "contact@sleepisland.org",
      "contactType": "customer service"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "Hushbay",
    "operatingSystem": "iOS",
    "applicationCategory": "HealthApplication",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.8", "ratingCount": "120" },
    "url": "https://sleepisland.org/en/",
    "downloadUrl": "https://apps.apple.com/app/id6747609991"
  }
];

import { resources as allRes } from '../../data/resources';

const sceneMap: Record<string, string> = {
  '入睡': 'Sleep', '放松': 'Relaxation', '阅读': 'Reading',
  '深度放松': 'Deep Relaxation', '冥想': 'Meditation', '减压': 'Stress Relief',
  '专注': 'Focus', '遮蔽噪音': 'Noise Masking', '失眠': 'Insomnia',
  '耳鸣缓解': 'Tinnitus Relief', '助眠': 'Sleep Aid', '早起': 'Morning',
};

const featuredSlugs = ['rain-fireplace', 'tropical-rainforest', 'deep-sea-bubbles', 'winter-cave-fireplace', 'cricket-sounds', 'thunderstorm', 'pink-noise', 'lake-rain', 'crickets-insects'];
const resources = featuredSlugs.map(slug => ({
  title: allRes[slug].titleEn,
  slug,
  category: allRes[slug].category,
  scene: allRes[slug].scenes.map((s: string) => sceneMap[s] || s).join(', '),
  duration: allRes[slug].durationLabel,
  cover: allRes[slug].cover,
}));
---

<BaseLayout
  title="Hushbay - Natural Sleep Sounds & Auto-Stop on Sleep | Hushbay"
  description="Hushbay is a sound-driven sleep app: natural soundscapes, tinnitus relief, auto-stop on sleep, and sleep tracking. Free web preview available, full version in-app."
  lang="en"
  alternateZh="https://sleepisland.org/"
  alternateEn="https://sleepisland.org/en/"
  schema={schema}
>
  <!-- Hero -->
  <section class="text-center py-20 px-4 bg-gradient-to-b from-[#0f1528] to-[var(--color-bg-primary)]">
    <img src="/assets/logo-1024.png" alt="Hushbay Logo" width="120" height="120" class="mx-auto mb-6 rounded-3xl" />
    <h1 class="text-4xl md:text-5xl font-bold mb-4">Hushbay</h1>
    <p class="text-xl text-[var(--color-text-secondary)] mb-2">Put on your headphones. Do nothing else.</p>
    <p class="text-sm text-[var(--color-text-muted)] mb-8">Natural soundscapes · Tinnitus relief · Auto-stop on sleep · Sleep tracking</p>
    <div class="flex justify-center gap-4 flex-wrap">
      <a href="https://apps.apple.com/app/id6747609991" class="bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-medium px-8 py-3.5 rounded-full transition-colors">
        Download on the App Store
      </a>
      <a href="/en/resources/" class="border border-[var(--color-border-card)] text-[var(--color-text-secondary)] hover:text-white hover:border-white/30 font-medium px-8 py-3.5 rounded-full transition-colors">
        Browse Sound Resources
      </a>
    </div>
  </section>

  <!-- Core Features -->
  <section class="max-w-4xl mx-auto px-4 py-16">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F30A;</div>
        <h3 class="font-semibold text-lg mb-2">Natural Soundscapes</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Rain, ocean waves, fireplace, cricket sounds... High-quality natural soundscapes to help you fall asleep. Free web preview available.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F4A4;</div>
        <h3 class="font-semibold text-lg mb-2">Auto-Stop on Sleep</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Automatically stops playback when it detects you've fallen asleep. No worries about all-night playback draining your battery, and no sudden stop to wake you.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F9E0;</div>
        <h3 class="font-semibold text-lg mb-2">Sleep Tracking</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Track deep sleep, light sleep, snoring, and sleep talking. AI assistant helps you understand your sleep data and provides personalized advice.</p>
      </div>
    </div>
  </section>

  <!-- Featured Resources -->
  <section class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-2">Featured Sound Resources</h2>
    <p class="text-center text-[var(--color-text-secondary)] mb-8">Preview on web, full version in App</p>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {resources.map(r => (
        <ResourceCard {...r} lang="en" />
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/en/resources/" class="text-[var(--color-accent-light)] hover:underline">View all resources &rarr;</a>
    </div>
  </section>

  <!-- Tinnitus Relief Section -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-8">
      <div class="text-3xl mb-3">&#x1F997;</div>
      <h2 class="text-xl font-bold mb-3">Tinnitus Relief</h2>
      <p class="text-[var(--color-text-secondary)] mb-4">Cricket sounds, summer night insects, and other natural sounds help relieve tinnitus through sound masking therapy. Natural white noise with frequencies close to your tinnitus works best -- this is a method recommended by authoritative institutions like Mayo Clinic.</p>
      <a href="/en/tinnitus-relief/" class="text-[var(--color-accent-light)] hover:underline">Learn more about tinnitus relief &rarr;</a>
    </div>
  </section>

  <!-- FAQ -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-8">Frequently Asked Questions</h2>
    <div class="space-y-4">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Is Hushbay free?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Core features are completely free: sleep tracking, snore recording, white noise for sleep, and tinnitus relief. No 7-day trial, no forced subscription.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Do I need a smartwatch?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">No. Hushbay detects body movement through your phone's sensors. Just place your phone on the bed or nightstand -- it works even with the screen off.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Does white noise really help with sleep?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Multiple studies confirm that white noise can shorten the time it takes to fall asleep and reduce nighttime awakenings. Natural white noise (rain, ocean waves) is more comfortable than mechanical white noise.</p>
      </div>
    </div>
    <div class="text-center mt-6">
      <a href="/en/faq/" class="text-[var(--color-accent-light)] hover:underline">View more questions &rarr;</a>
    </div>
  </section>

  <!-- Bottom CTA -->
  <CTABanner lang="en" variant="bottom" />
</BaseLayout>
