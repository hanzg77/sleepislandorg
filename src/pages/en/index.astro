---
import BaseLayout from '../../layouts/BaseLayout.astro';
import CTABanner from '../../components/CTABanner.astro';
import ResourceCard from '../../components/ResourceCard.astro';

const schema = [
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Hushbay",
    "url": "https://sleepisland.org/en/",
    "inLanguage": ["en", "zh-Hans"]
  },
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Hushbay",
    "url": "https://sleepisland.org/",
    "logo": "https://sleepisland.org/assets/logo-1024.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "contact@sleepisland.org",
      "contactType": "customer service"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "Hushbay",
    "operatingSystem": "iOS",
    "applicationCategory": "HealthApplication",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.8", "ratingCount": "120" },
    "url": "https://sleepisland.org/en/",
    "downloadUrl": "https://apps.apple.com/app/id6747609991"
  }
];

import { resources as allRes } from '../../data/resources';

const sceneMap: Record<string, string> = {
  '入睡': 'Sleep', '放松': 'Relaxation', '阅读': 'Reading',
  '深度放松': 'Deep Relaxation', '冥想': 'Meditation', '减压': 'Stress Relief',
  '专注': 'Focus', '遮蔽噪音': 'Noise Masking', '失眠': 'Insomnia',
  '耳鸣缓解': 'Tinnitus Relief', '助眠': 'Sleep Aid', '早起': 'Morning',
};

const featuredSlugs = ['rain-fireplace', 'tropical-rainforest', 'deep-sea-bubbles', 'winter-cave-fireplace', 'cricket-sounds', 'thunderstorm', 'pink-noise', 'lake-rain', 'crickets-insects'];
const resources = featuredSlugs.map(slug => ({
  title: allRes[slug].titleEn,
  slug,
  category: allRes[slug].category,
  scene: allRes[slug].scenes.map((s: string) => sceneMap[s] || s).join(', '),
  duration: allRes[slug].durationLabel,
  cover: allRes[slug].cover,
}));
---

<BaseLayout
  title="Hushbay - Natural Sleep Sounds & Auto-Stop on Sleep | Hushbay"
  description="Hushbay is a sound-driven sleep app: natural soundscapes, tinnitus relief, auto-stop on sleep, and sleep tracking. Free web preview available, full version in-app."
  lang="en"
  alternateZh="https://sleepisland.org/"
  alternateEn="https://sleepisland.org/en/"
  schema={schema}
>
  <!-- Hero -->
  <section class="text-center py-20 px-4 bg-gradient-to-b from-[#0f1528] to-[var(--color-bg-primary)]">
    <img src="/assets/logo-1024.png" alt="Hushbay Logo" width="120" height="120" class="mx-auto mb-6 rounded-3xl" />
    <h1 class="text-4xl md:text-5xl font-bold mb-4">Hushbay</h1>
    <p class="text-xl text-[var(--color-text-secondary)] mb-2">Put on your headphones. Do nothing else.</p>
    <p class="text-sm text-[var(--color-text-muted)] mb-8">Natural soundscapes · Tinnitus relief · Auto-stop on sleep · Sleep tracking</p>
    <div class="flex justify-center gap-4 flex-wrap">
      <a href="https://apps.apple.com/app/id6747609991" class="bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-medium px-8 py-3.5 rounded-full transition-colors">
        Download on the App Store
      </a>
      <a href="/en/resources/" class="border border-[var(--color-border-card)] text-[var(--color-text-secondary)] hover:text-white hover:border-white/30 font-medium px-8 py-3.5 rounded-full transition-colors">
        Browse Sound Resources
      </a>
    </div>
  </section>

  <!-- Core Features -->
  <section class="max-w-5xl mx-auto px-4 py-16">
    <div class="grid md:grid-cols-2 gap-5">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">Rich Healing Sounds</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">White, pink, and brown noise; rain, ocean waves, crickets, campfire, and hundreds of natural sounds. Sleep music, ASMR, audiobooks, and immersive videos. Free sound mixing.</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">Auto-Stop on Sleep</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">Detects when you fall asleep and gradually fades audio to silence. No timer needed, saves battery, and no sudden stop to wake you.</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">Wearable-Free Sleep Tracking</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">No smartwatch needed. Place your phone on the nightstand. Auto-detects sleep onset and deep sleep, captures snoring and sleep talking with playback, and shows weekly/monthly trends.</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">Mind & Body Relaxation</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">Box breathing, 4-7-8 breathing exercises to ease anxiety. Focus mode blocks distractions for work, study, and reading.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Resources -->
  <section class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-2">Featured Sound Resources</h2>
    <p class="text-center text-[var(--color-text-secondary)] mb-8">Preview on web, full version in App</p>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {resources.map(r => (
        <ResourceCard {...r} lang="en" />
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/en/resources/" class="text-[var(--color-accent-light)] hover:underline">View all resources &rarr;</a>
    </div>
  </section>

  <!-- Tinnitus Relief Section -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-8">
      <div class="text-3xl mb-3">&#x1F997;</div>
      <h2 class="text-xl font-bold mb-3">Tinnitus Relief</h2>
      <p class="text-[var(--color-text-secondary)] mb-4">Cricket sounds, summer night insects, and other natural sounds help relieve tinnitus through sound masking therapy. Natural white noise with frequencies close to your tinnitus works best -- this is a method recommended by authoritative institutions like Mayo Clinic.</p>
      <a href="/en/tinnitus-relief/" class="text-[var(--color-accent-light)] hover:underline">Learn more about tinnitus relief &rarr;</a>
    </div>
  </section>

  <!-- FAQ -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-8">Frequently Asked Questions</h2>
    <div class="space-y-4">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Is Hushbay free?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Core features are completely free: sleep tracking, snore recording, white noise for sleep, and tinnitus relief. No 7-day trial, no forced subscription.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Do I need a smartwatch?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">No. Hushbay detects body movement through your phone's sensors. Just place your phone on the bed or nightstand -- it works even with the screen off.</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">Does white noise really help with sleep?</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">Multiple studies confirm that white noise can shorten the time it takes to fall asleep and reduce nighttime awakenings. Natural white noise (rain, ocean waves) is more comfortable than mechanical white noise.</p>
      </div>
    </div>
    <div class="text-center mt-6">
      <a href="/en/faq/" class="text-[var(--color-accent-light)] hover:underline">View more questions &rarr;</a>
    </div>
  </section>

  <!-- Bottom CTA -->
  <CTABanner lang="en" variant="bottom" />
</BaseLayout>
