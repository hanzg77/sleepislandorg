---
import BaseLayout from '../layouts/BaseLayout.astro';
import CTABanner from '../components/CTABanner.astro';
import ResourceCard from '../components/ResourceCard.astro';

const schema = [
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "睡眠岛 Hushbay",
    "url": "https://sleepisland.org/",
    "inLanguage": ["zh-Hans", "en"]
  },
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "睡眠岛 Hushbay",
    "url": "https://sleepisland.org/",
    "logo": "https://sleepisland.org/assets/logo-1024.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "contact@sleepisland.org",
      "contactType": "customer service"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "睡眠岛 Hushbay",
    "operatingSystem": "iOS",
    "applicationCategory": "HealthApplication",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.8", "ratingCount": "120" },
    "url": "https://sleepisland.org/",
    "downloadUrl": "https://apps.apple.com/app/id6747609991"
  }
];

import { resources as allRes } from '../data/resources';

const featuredSlugs = ['rain-fireplace', 'tropical-rainforest', 'deep-sea-bubbles', 'winter-cave-fireplace', 'cricket-sounds', 'thunderstorm', 'pink-noise', 'lake-rain', 'crickets-insects'];
const resources = featuredSlugs.map(slug => ({
  title: allRes[slug].title,
  slug,
  category: allRes[slug].category,
  scene: allRes[slug].scenes.join('、'),
  duration: allRes[slug].durationLabel,
  cover: allRes[slug].cover,
}));
---

<BaseLayout
  title="睡眠岛 - 自然助眠声音与入睡自动停止 | Hushbay"
  description="睡眠岛是一款声音驱动的睡眠 App：自然音景、耳鸣缓解、入睡自动停止、鼾声与睡眠记录反馈。网页提供免费试听，完整版在 App 内。"
  lang="zh-Hans"
  alternateZh="https://sleepisland.org/"
  alternateEn="https://sleepisland.org/en/"
  schema={schema}
>
  <!-- Hero -->
  <section class="text-center py-20 px-4 bg-gradient-to-b from-[#0f1528] to-[var(--color-bg-primary)]">
    <img src="/assets/logo-1024.png" alt="睡眠岛 Logo" width="120" height="120" class="mx-auto mb-6 rounded-3xl" />
    <h1 class="text-4xl md:text-5xl font-bold mb-4">睡眠岛 Hushbay</h1>
    <p class="text-xl text-[var(--color-text-secondary)] mb-2">戴上耳机，什么都不用做。</p>
    <p class="text-sm text-[var(--color-text-muted)] mb-8">自然音景 · 耳鸣缓解 · 入睡自动停止 · 睡眠记录反馈</p>
    <div class="flex justify-center gap-4 flex-wrap">
      <a href="https://apps.apple.com/app/id6747609991" class="bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-medium px-8 py-3.5 rounded-full transition-colors">
        在 App Store 免费下载
      </a>
      <a href="/resources/" class="border border-[var(--color-border-card)] text-[var(--color-text-secondary)] hover:text-white hover:border-white/30 font-medium px-8 py-3.5 rounded-full transition-colors">
        浏览声音资源
      </a>
    </div>
  </section>

  <!-- Core Features -->
  <section class="max-w-5xl mx-auto px-4 py-16">
    <div class="grid md:grid-cols-2 gap-5">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">海量疗愈之声</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">白噪音/粉红/棕色噪音、雨声、海浪、虫鸣、篝火等上百种自然声；助眠音乐、ASMR、有声书、沉浸式视频。支持多声音自由混音。</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">入睡自动停止</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">智能监测入睡状态，音频缓缓淡出并自动停止。不用设定时器，省电又安心，不会被突然停止惊醒。</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">免穿戴睡眠监测</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">无需手表手环，手机放床头即可。自动识别入睡与深睡，精准捕捉鼾声和梦话并可回放，按周/月查看睡眠趋势。</p>
        </div>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6 flex gap-5">
        <div class="shrink-0 w-11 h-11 rounded-xl bg-[var(--color-accent)]/10 flex items-center justify-center">
          <svg class="w-6 h-6 text-[var(--color-accent)]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"/></svg>
        </div>
        <div>
          <h3 class="font-semibold text-lg mb-1.5">身心放松练习</h3>
          <p class="text-sm text-[var(--color-text-secondary)] leading-relaxed">方块呼吸、4-7-8 呼吸等引导练习舒缓焦虑；专注模式屏蔽干扰，适合工作、学习和阅读。</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Resources -->
  <section class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-2">精选声音资源</h2>
    <p class="text-center text-[var(--color-text-secondary)] mb-8">网页可直接试听，完整版在 App 内</p>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {resources.map(r => (
        <ResourceCard {...r} lang="zh-Hans" />
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/resources/" class="text-[var(--color-accent-light)] hover:underline">查看全部资源 →</a>
    </div>
  </section>

  <!-- Tinnitus Relief Section -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-8">
      <div class="text-3xl mb-3">&#x1F997;</div>
      <h2 class="text-xl font-bold mb-3">耳鸣缓解</h2>
      <p class="text-[var(--color-text-secondary)] mb-4">蟋蟀声、夏夜虫鸣等自然声音，通过声音遮蔽疗法缓解耳鸣困扰。频率接近耳鸣声的自然白噪音效果最好——这是 Mayo Clinic 等权威机构推荐的方法。</p>
      <a href="/tinnitus-relief/" class="text-[var(--color-accent-light)] hover:underline">了解更多关于耳鸣缓解 →</a>
    </div>
  </section>

  <!-- FAQ -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-8">常见问题</h2>
    <div class="space-y-4">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">睡眠岛免费吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">核心功能全免费：睡眠监测、鼾声记录、白噪音助眠、耳鸣缓解。没有 7 天试用，没有强制订阅。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">需要戴手表吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">不需要。通过手机传感器检测身体活动，手机放床头就行，关屏也能监测。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">白噪音真的有用吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">多项研究证实白噪音能缩短入睡时间、减少夜间醒来。自然白噪音（雨声、海浪）比机械白噪音更舒适。</p>
      </div>
    </div>
    <div class="text-center mt-6">
      <a href="/faq/" class="text-[var(--color-accent-light)] hover:underline">查看更多问题 →</a>
    </div>
  </section>

  <!-- Bottom CTA -->
  <CTABanner lang="zh-Hans" variant="bottom" />
</BaseLayout>
