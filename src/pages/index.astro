---
import BaseLayout from '../layouts/BaseLayout.astro';
import CTABanner from '../components/CTABanner.astro';
import ResourceCard from '../components/ResourceCard.astro';

const schema = [
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "睡眠岛 Hushbay",
    "url": "https://sleepisland.org/",
    "inLanguage": ["zh-Hans", "en"]
  },
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "睡眠岛 Hushbay",
    "url": "https://sleepisland.org/",
    "logo": "https://sleepisland.org/assets/logo-1024.png",
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "contact@sleepisland.org",
      "contactType": "customer service"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "MobileApplication",
    "name": "睡眠岛 Hushbay",
    "operatingSystem": "iOS",
    "applicationCategory": "HealthApplication",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "aggregateRating": { "@type": "AggregateRating", "ratingValue": "4.8", "ratingCount": "120" },
    "url": "https://sleepisland.org/",
    "downloadUrl": "https://apps.apple.com/app/id6747609991"
  }
];

import { resources as allRes } from '../data/resources';

const featuredSlugs = ['rain-fireplace', 'tropical-rainforest', 'deep-sea-bubbles', 'winter-cave-fireplace', 'cricket-sounds', 'thunderstorm', 'pink-noise', 'lake-rain', 'crickets-insects'];
const resources = featuredSlugs.map(slug => ({
  title: allRes[slug].title,
  slug,
  category: allRes[slug].category,
  scene: allRes[slug].scenes.join('、'),
  duration: allRes[slug].durationLabel,
  cover: allRes[slug].cover,
}));
---

<BaseLayout
  title="睡眠岛 - 自然助眠声音与入睡自动停止 | Hushbay"
  description="睡眠岛是一款声音驱动的睡眠 App：自然音景、耳鸣缓解、入睡自动停止、鼾声与睡眠记录反馈。网页提供免费试听，完整版在 App 内。"
  lang="zh-Hans"
  alternateZh="https://sleepisland.org/"
  alternateEn="https://sleepisland.org/en/"
  schema={schema}
>
  <!-- Hero -->
  <section class="text-center py-20 px-4 bg-gradient-to-b from-[#0f1528] to-[var(--color-bg-primary)]">
    <img src="/assets/logo-1024.png" alt="睡眠岛 Logo" width="120" height="120" class="mx-auto mb-6 rounded-3xl" />
    <h1 class="text-4xl md:text-5xl font-bold mb-4">睡眠岛 Hushbay</h1>
    <p class="text-xl text-[var(--color-text-secondary)] mb-2">戴上耳机，什么都不用做。</p>
    <p class="text-sm text-[var(--color-text-muted)] mb-8">自然音景 · 耳鸣缓解 · 入睡自动停止 · 睡眠记录反馈</p>
    <div class="flex justify-center gap-4 flex-wrap">
      <a href="https://apps.apple.com/app/id6747609991" class="bg-[var(--color-accent)] hover:bg-[var(--color-accent-hover)] text-white font-medium px-8 py-3.5 rounded-full transition-colors">
        在 App Store 免费下载
      </a>
      <a href="/resources/" class="border border-[var(--color-border-card)] text-[var(--color-text-secondary)] hover:text-white hover:border-white/30 font-medium px-8 py-3.5 rounded-full transition-colors">
        浏览声音资源
      </a>
    </div>
  </section>

  <!-- Core Features -->
  <section class="max-w-4xl mx-auto px-4 py-16">
    <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F30A;</div>
        <h3 class="font-semibold text-lg mb-2">自然音景</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">雨声、海浪、篝火、蟋蟀声……高品质自然音景帮你快速入眠，支持 Web 试听。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F4A4;</div>
        <h3 class="font-semibold text-lg mb-2">入睡自动停止</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">检测到你入睡后自动停止播放。不用担心整夜播放耗电，也不会被突然停止惊醒。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <div class="text-3xl mb-3">&#x1F9E0;</div>
        <h3 class="font-semibold text-lg mb-2">睡眠记录反馈</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">追踪深睡浅睡、鼾声、梦话。AI 助手小棉帮你解读睡眠数据，给出个性化建议。</p>
      </div>
    </div>
  </section>

  <!-- Featured Resources -->
  <section class="max-w-4xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-2">精选声音资源</h2>
    <p class="text-center text-[var(--color-text-secondary)] mb-8">网页可直接试听，完整版在 App 内</p>
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {resources.map(r => (
        <ResourceCard {...r} lang="zh-Hans" />
      ))}
    </div>
    <div class="text-center mt-8">
      <a href="/resources/" class="text-[var(--color-accent-light)] hover:underline">查看全部资源 →</a>
    </div>
  </section>

  <!-- Tinnitus Relief Section -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-8">
      <div class="text-3xl mb-3">&#x1F997;</div>
      <h2 class="text-xl font-bold mb-3">耳鸣缓解</h2>
      <p class="text-[var(--color-text-secondary)] mb-4">蟋蟀声、夏夜虫鸣等自然声音，通过声音遮蔽疗法缓解耳鸣困扰。频率接近耳鸣声的自然白噪音效果最好——这是 Mayo Clinic 等权威机构推荐的方法。</p>
      <a href="/tinnitus-relief/" class="text-[var(--color-accent-light)] hover:underline">了解更多关于耳鸣缓解 →</a>
    </div>
  </section>

  <!-- FAQ -->
  <section class="max-w-3xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-bold text-center mb-8">常见问题</h2>
    <div class="space-y-4">
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">睡眠岛免费吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">核心功能全免费：睡眠监测、鼾声记录、白噪音助眠、耳鸣缓解。没有 7 天试用，没有强制订阅。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">需要戴手表吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">不需要。通过手机传感器检测身体活动，手机放床头就行，关屏也能监测。</p>
      </div>
      <div class="bg-[var(--color-bg-card)] border border-[var(--color-border-card)] rounded-xl p-6">
        <h3 class="font-semibold mb-2">白噪音真的有用吗？</h3>
        <p class="text-sm text-[var(--color-text-secondary)]">多项研究证实白噪音能缩短入睡时间、减少夜间醒来。自然白噪音（雨声、海浪）比机械白噪音更舒适。</p>
      </div>
    </div>
    <div class="text-center mt-6">
      <a href="/faq/" class="text-[var(--color-accent-light)] hover:underline">查看更多问题 →</a>
    </div>
  </section>

  <!-- Bottom CTA -->
  <CTABanner lang="zh-Hans" variant="bottom" />
</BaseLayout>
